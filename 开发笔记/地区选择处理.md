```
<
template
>
```

```
  <
div
 
class
=
"checkAreaMain"
>
```

```
    {{ 
chooseTag
 }}
```

```
    <
div
 
class
=
"areaTitle"
 
v-for
="(
item
, 
index
) 
in
 
areaOptions
" :
key
="
index
">
```

```
      <
el-checkbox
```

```
        
v-model
="
item
.
check
"
```

```
        
size
=
"large"
```

```
        :
indeterminate
="
indeterminate
(
item
, 
null
).
isIndeterminate
"
```

```
        @
change
="
handleCheckedCitiesChange
(
item
, 
null
, 
null
, 
null
)"
```

```
      ></
el-checkbox
>
```

```
      {{ 
item
.
label
 }} id:{{ 
item
.
value
 }}{{ 
item
.
check
 }}
```

```
      <
div
 
v-if
="
item
.
children
.
length
 
>
 
0
">
```

```
        <
div
 
class
=
"two"
 
v-for
="(
item2
, 
index2
) 
in
 
item
.
children
" :
key
="
index2
">
```

```
          <
el-checkbox
```

```
            
v-model
="
item2
.
check
"
```

```
            
size
=
"large"
```

```
            :
indeterminate
="
indeterminate
(
item
, 
item2
).
isIndeterminate
"
```

```
            @
change
="
handleCheckedCitiesChange
(
item
, 
item2
, 
null
)"
```

```
          ></
el-checkbox
>
```

```
          {{ 
item2
.
label
 }} id:{{ 
item2
.
value
 }}{{ 
item2
.
check
 }}
```

```
          <
div
 
class
=
"allThree"
 
v-if
="
item2
.
children
.
length
 
>
 
0
">
```

```
            <
div
```

```
              
class
=
"three"
```

```
              
v-for
="(
item3
, 
index3
) 
in
 
item2
.
children
"
```

```
              :
key
="
index3
"
```

```
            >
```

```
              <
el-checkbox
```

```
                
v-model
="
item3
.
check
"
```

```
                
size
=
"large"
```

```
                @
change
="
handleCheckedCitiesChange
(
item
, 
item2
, 
item3
)"
```

```
              ></
el-checkbox
>
```

```
              {{ 
item3
.
label
 }} id:{{ 
item3
.
value
 }}{{ 
item3
.
check
 }}
```

```
            </
div
>
```

```
          </
div
>
```

```
        </
div
>
```

```
      </
div
>
```

```
    </
div
>
```

```
  </
div
>
```

```
</
template
>
```

```
<
script
 
setup
>
```

```
import
 
areaData
 
from
 
"@/constant/allarea"
; 
//
```

_地区列表_

```
import
 { 
arrayToCheckTree
 } 
from
 
"@/hooks/arrayToTree"
; 
//
```

_地区处理_

```
import
 { 
ref
, 
reactive
, 
onMounted
 } 
from
 
"vue"
;
```

```
import
 
_
 
from
 
"lodash"
;
```

```
const
 
demoCascader
 
=
 
ref
(
null
);
```

```
let
 
chooseTag
 
=
 
reactive
([]);
```

```
let
 
areaOptions
 
=
 
ref
(
_
.
cloneDeep
(
arrayToCheckTree
(
areaData
.
flat
(
Infinity
)))); 
//
```

_地区_

```
//
```

_选择_

```
checkbox
```

```
const
 
handleCheckedCitiesChange
 
=
 (
item
, 
item2
, 
item3
) 
=>
 {
```

```
  
if
 (
item2
 
==
 
null
) {
```

```
    
if
 (
item
.
check
) {
```

```
      
allCheck
(
item
, 
null
);
```

```
      
chooseTag
.
push
(
item
);
```

```
    } 
else
 {
```

```
      
clearCheck
(
item
, 
null
);
```

```
    }
```

```
  } 
else
 
if
 (
item3
 
==
 
null
) {
```

```
    
if
 (
item2
.
check
) {
```

```
      
allCheck
(
item
, 
item2
);
```

```
    } 
else
 {
```

```
      
clearCheck
(
item
, 
item2
);
```

```
    }
```

```
    
let
 
all
 
=
 
indeterminate
(
item
, 
null
).
all
;
```

```
    
let
 
leng
 
=
 
indeterminate
(
item
, 
null
).
leng
;
```

```
    
if
 (
all
 
==
 
leng
) {
```

```
      
item
.
check
 
=
 
true
;
```

```
    } 
else
 {
```

```
      
item
.
check
 
=
 
false
;
```

```
    }
```

```
  } 
else
 {
```

```
    
if
 (
indeterminate
(
item
, 
item2
).
all
 
==
 
indeterminate
(
item
, 
item2
).
leng
) {
```

```
      
item2
.
check
 
=
 
true
;
```

```
    } 
else
 {
```

```
      
item2
.
check
 
=
 
false
;
```

```
    }
```

```
    
if
 (
indeterminate
(
item
, 
null
).
all
 
==
 
indeterminate
(
item
, 
null
).
leng
) {
```

```
      
item
.
check
 
=
 
true
;
```

```
    } 
else
 {
```

```
      
item
.
check
 
=
 
false
;
```

```
    }
```

```
  }
```

```
};
```

```
//
```

_未全选状态判断_

```
const
 
indeterminate
 
=
 (
item
, 
item2
) 
=>
 {
```

```
  
if
 (
item2
 
==
 
null
) {
```

```
    
let
 
isIndeterminate
 
=
 
false
;
```

```
    
let
 
i
 
=
 
0
;
```

```
    
let
 
j
 
=
 
0
;
```

```
    
item
.
children
.
forEach
((
itemIN2
) 
=>
 {
```

```
      
if
 (
itemIN2
.
check
) {
```

```
        
i
++
;
```

```
      }
```

```
    });
```

```
    
item
.
children
.
forEach
((
itemIN2
) 
=>
 {
```

```
      
itemIN2
.
children
.
forEach
((
item3
) 
=>
 {
```

```
        
if
 (
item3
.
check
) {
```

```
          
j
++
;
```

```
        }
```

```
      });
```

```
    });
```

```
    
if
 (
j
 
==
 
0
) {
```

```
      
return
 {
```

```
        
isIndeterminate
: 
isIndeterminate
,
```

```
        
all
: 
i
,
```

```
        
leng
: 
item
.
children
.
length
,
```

```
      };
```

```
    } 
else
 {
```

```
      
if
 (
i
 
==
 
item
.
children
.
length
) {
```

```
        
return
 {
```

```
          
isIndeterminate
: 
false
,
```

```
          
all
: 
i
,
```

```
          
leng
: 
item
.
children
.
length
,
```

```
        };
```

```
      } 
else
 {
```

```
        
return
 {
```

```
          
isIndeterminate
: 
true
,
```

```
          
all
: 
i
,
```

```
          
leng
: 
item
.
children
.
length
,
```

```
        };
```

```
      }
```

```
    }
```

```
  } 
else
 {
```

```
    
let
 
isIndeterminate
 
=
 
false
;
```

```
    
let
 
i
 
=
 
0
;
```

```
    
item2
.
children
.
forEach
((
item3
) 
=>
 {
```

```
      
if
 (
item3
.
check
) {
```

```
        
i
++
;
```

```
      }
```

```
    });
```

```
    
isIndeterminate
 
=
 
i
 
>
 
0
 
&&
 
i
 
<
 
item2
.
children
.
length
;
```

```
    
return
 {
```

```
      
isIndeterminate
: 
isIndeterminate
,
```

```
      
all
: 
i
,
```

```
      
leng
: 
item2
.
children
.
length
,
```

```
    };
```

```
  }
```

```
};
```

```
//
```

_取消全选_

```
const
 
clearCheck
 
=
 (
item
, 
item2
) 
=>
 {
```

```
  
if
 (
item2
 
==
 
null
) {
```

```
    
item
.
children
.
forEach
((
itemIN2
) 
=>
 {
```

```
      
itemIN2
.
check
 
=
 
false
;
```

```
      
itemIN2
.
children
.
forEach
((
itemIN3
) 
=>
 {
```

```
        
itemIN3
.
check
 
=
 
false
;
```

```
      });
```

```
    });
```

```
  } 
else
 {
```

```
    
item2
.
children
.
forEach
((
item3
) 
=>
 {
```

```
      
item3
.
check
 
=
 
false
;
```

```
    });
```

```
  }
```

```
};
```

```
//
```

_全选_

```
const
 
allCheck
 
=
 (
item
, 
item2
) 
=>
 {
```

```
  
if
 (
item2
 
==
 
null
) {
```

```
    
item
.
children
.
forEach
((
itemIN2
) 
=>
 {
```

```
      
itemIN2
.
check
 
=
 
true
;
```

```
      
itemIN2
.
children
.
forEach
((
itemIN3
) 
=>
 {
```

```
        
itemIN3
.
check
 
=
 
true
;
```

```
      });
```

```
    });
```

```
  } 
else
 {
```

```
    
item2
.
children
.
forEach
((
item3
) 
=>
 {
```

```
      
item3
.
check
 
=
 
true
;
```

```
    });
```

```
  }
```

```
};
```

```
onMounted
(() 
=>
 {});
```

```
</
script
>
```

```
<
style
 
lang
=
"scss"
 
scoped
>
```

```
.checkAreaMain
 {
```

```
  
.areaTitle
 {
```

```
    margin-top: 
5
px
;
```

```
    background: 
#999
;
```

```
    
.two
 {
```

```
      
.allThree
 {
```

```
        display: 
flex
;
```

```
        flex-wrap: 
wrap
;
```

```
        
.three
 {
```

```
          margin: 
5
px
;
```

```
          background: 
rgb
(
113
, 
113
, 
250
);
```

```
        }
```

```
      }
```

```
    }
```

```
  }
```

```
}
```

```
</
style
>
```

第二个

```
￼
<
template
>
```

```
  <
div
 
class
=
"checkAreaMain"
>
```

```
    <
el-cascader
```

```
      
v-model
="
selectValue
"
```

```
      
class
=
"rightSelect"
```

```
      
ref
=
"myCascader"
```

```
      :
options
="
areaOptions
"
```

```
      :
props
="{ 
multiple
: 
true
 }"
```

```
      
clearable
```

```
      @
change
="
change
"
```

```
    />
```

```
  </
div
>
```

```
</
template
>
```

```
<
script
 
setup
>
```

```
import
 
areaData
 
from
 
"@/constant/allarea"
; 
//
```

_地区列表_

```
import
 { 
arrayToCheckTree
 } 
from
 
"@/hooks/arrayToTree"
; 
//
```

_地区处理_

```
import
 { 
ref
, 
reactive
, 
onMounted
, 
watch
 } 
from
 
"vue"
;
```

```
const
 
emits
 
=
 
defineEmits
([
"assignment"
]);
```

```
import
 
_
 
from
 
"lodash"
;
```

```
const
 
props
 
=
 
defineProps
({
```

```
  
suitRegion
: {
```

```
    
type
: 
Array
,
```

```
    
default
: () 
=>
 {
```

```
      
return
 [];
```

```
    },
```

```
  },
```

```
});
```

```
const
 
selectValue
 
=
 
ref
([]);
```

```
const
 
myCascader
 
=
 
ref
(
null
);
```

```
let
 
chooseTag
 
=
 
reactive
([]);
```

```
let
 
areaOptions
 
=
 
arrayToCheckTree
(
areaData
.
flat
(
Infinity
)); 
//
```

_地区_

```
function
 
change
(
a
) {
```

```
  
let
 
value
 
=
 
getCityCode
(
myCascader
.
value
.
getCheckedNodes
());
```

```
  
emits
(
"assignment"
, 
value
);
```

```
}
```

```
function
 
getCityCode
(
cityList
) {
```

```
  
const
 
list
 
=
 
cityList
.
map
((
item
) 
=>
 {
```

```
    
return
 
item
.
value
;
```

```
  });
```

```
  
// 
```

_首先将全部的_

```
code
```

_拿到整合成一个数组_

```
  
const
 
selectCityList
 
=
 []; 
// 
```

_整合_

```
(
```

_拼装后_

```
)
```

_的数组_

```
  
cityList
.
forEach
((
item
) 
=>
 {
```

```
    
// 
```

_如果当前项长度是_

```
2
```

_表示它是一个省份直接添加进新数组中_

```
    
if
 (
item
.
value
.
length
 
==
 
2
) {
```

```
      
// console.log('
```

_选择的是省份_

```
')
```

```
      
selectCityList
.
push
(
item
.
value
);
```

```
    } 
else
 
if
 (
item
.
value
.
length
 
==
 
4
) {
```

```
      
const
 
code
 
=
 
item
.
value
.
toString
().
substr
(
0
, 
2
);
```

```
      
// 
```

_如果是城市的话_

```
, 
```

_则需要判断这个城市所属的省份有没有在数组里面_

```
,
```

```
      
// 
```

_有当前城市的省份_

```
 ==> 
```

_不添加进数据_

```
      
// 
```

_没有省份_

```
 ==> 
```

_添加进数据_

```
      
if
 (
!
list
.
includes
(
code
)) {
```

```
        
selectCityList
.
push
(
item
.
value
);
```

```
      }
```

```
      
// console.log('
```

_选择的是城市_

```
')
```

```
    } 
else
 {
```

```
      
const
 
code
 
=
 
item
.
value
.
toString
().
substr
(
0
, 
4
);
```

```
      
const
 
proCode
 
=
 
item
.
value
.
toString
().
substr
(
0
, 
2
);
```

```
      
// 
```

_如果是区县的话_

```
, 
```

_则需要判断这个城市所属的省份和城市有没有在数组里面_

```
      
// 
```

_有当前区县的省份或者城市_

```
 ==> 
```

_不添加进数据_

```
      
// 
```

_没有省份和城市_

```
 ==> 
```

_添加进数据_

```
      
if
 (
!
list
.
includes
(
code
) 
&&
 
!
list
.
includes
(
proCode
)) {
```

```
        
selectCityList
.
push
(
item
.
value
);
```

```
      }
```

```
      
// console.log('
```

_默认选择的是区县_

```
')
```

```
    }
```

```
  });
```

```
  
console
.
log
(
selectCityList
, 
"
```

选中列表

```
"
);
```

```
  
return
 
selectCityList
.
length
 
?
 
selectCityList
 
:
 [];
```

```
}
```

```
watch
(
```

```
  () 
=>
 
props
.
suitRegion
,
```

```
  (
data
) 
=>
 {
```

```
    
console
.
log
(
data
);
```

```
    
if
 (
!
_
.
isEmpty
(
data
)) {
```

```
      
echoArea
();
```

```
    }
```

```
  },
```

```
  { 
immediate
: 
true
, 
deep
: 
true
 }
```

```
);
```

```
function
 
echoArea
() {
```

```
  
let
 
result
 
=
 [];
```

```
  
props
.
suitRegion
.
forEach
((
item
) 
=>
 {
```

```
    
if
 (
item
.
length
 
===
 
2
) {
```

```
      
const
 
proList
 
=
 
areaOptions
.
filter
((
areaItem
) 
=>
 
areaItem
.
value
 
===
 
item
);
```

```
      
proList
.
forEach
((
proItem
) 
=>
 {
```

```
        
if
 (
proItem
.
children
 
&&
 
proItem
.
children
.
length
) {
```

```
          
proItem
.
children
.
forEach
((
cityItem
) 
=>
 {
```

```
            
if
 (
cityItem
.
children
 
&&
 
cityItem
.
children
.
length
) {
```

```
              
cityItem
.
children
.
forEach
((
regionItem
) 
=>
 {
```

```
                
result
.
push
([
proItem
.
value
, 
cityItem
.
value
, 
regionItem
.
value
]);
```

```
              });
```

```
            } 
else
 {
```

```
              
result
.
push
([
proItem
.
value
, 
cityItem
.
value
]);
```

```
            }
```

```
          });
```

```
        }
```

```
      });
```

```
    } 
else
 
if
 (
item
.
length
 
===
 
4
) {
```

```
      
const
 
proList
 
=
 
areaOptions
.
filter
((
areaItem
) 
=>
 
areaItem
.
value
 
===
 
item
.
substr
(
0
, 
2
));
```

```
      
proList
.
forEach
((
proItem
) 
=>
 {
```

```
        
proItem
.
children
.
forEach
((
cityItem
) 
=>
 {
```

```
          
if
 (
cityItem
.
children
 
&&
 
cityItem
.
children
.
length
) {
```

```
            
cityItem
.
children
.
forEach
((
regionItem
) 
=>
 {
```

```
              
if
 (
cityItem
.
value
 
===
 
item
) {
```

```
                
result
.
push
([
proItem
.
value
, 
cityItem
.
value
, 
regionItem
.
value
]);
```

```
              }
```

```
            });
```

```
          } 
else
 
if
 (
cityItem
.
value
 
===
 
item
) {
```

```
            
result
.
push
([
proItem
.
value
, 
cityItem
.
value
]);
```

```
          }
```

```
        });
```

```
      });
```

```
    } 
else
 {
```

```
      
const
 
proCode
 
=
 
item
.
substr
(
0
, 
2
) 
+
 
""
;
```

```
      
const
 
cityCode
 
=
 
item
.
substr
(
2
, 
2
) 
+
 
""
;
```

```
      
result
.
push
([
proCode
, 
`
${
proCode
}${
cityCode
}
`
, 
item
]);
```

```
    }
```

```
  });
```

```
  
console
.
log
(
result
);
```

```
  
selectValue
.
value
 
=
 
result
;
```

```
}
```

```
onMounted
(() 
=>
 {});
```

```
</
script
>
```

```
<
style
 
lang
=
"scss"
 
scoped
>
```

```
.checkAreaMain
 {
```

```
}
```

```
</
style
>




```