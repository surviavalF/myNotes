穿梭框全部代码，作为子组件。

```
u
serMailList
 
```

为获取全部人员

```
￼
<
template
>
```

```
  <
el-dialog
```

```
    
title
=
"
```

人员选择

```
"
```

```
    
v-model
=
"
show
"
```

```
    
width
=
"640px"
```

```
    :
close-on-click-modal
=
"
false
"
```

```
    
center
```

```
    @
close
=
"
clearitems
"
```

```
  >
```

```
    <
div
 
class
=
"peopleCheck"
>
```

```
      <
el-transfer
```

```
        
v-model
=
"
yetPeople
"
```

```
        
filterable
```

```
        :
filter-method
=
"
filterMethod
"
```

```
        
filter-placeholder
=
"
```

请输入人员拼音

```
"
```

```
        :
data
=
"
allPeople
"
```

```
        @
left-check-change
=
"
changeLeftPeople
"
```

```
        :
titles
=
"
[
'
```

未选人员

```
'
, 
'
```

已选人员

```
'
]
"
```

```
      />
```

```
    </
div
>
```

```
    <
template
 #
footer
>
```

```
      <
span
 
class
=
"dialog-footer"
>
```

```
        <
el-button
 @
click
=
"
check
"
>
```

确认

```
</
el-button
>
```

```
      </
span
>
```

```
    </
template
>
```

```
  </
el-dialog
>
```

```
</
template
>
```

```
<
script
 
setup
>
```

```
import
 {
```

```
  
ref
,
```

```
  
reactive
,
```

```
  
onMounted
,
```

```
  
defineEmits
,
```

```
  
defineProps
,
```

```
  
defineExpose
,
```

```
  
watch
,
```

```
} 
from
 
"vue"
;
```

```
import
 { 
userMailList
 } 
from
 
"@/http/api/workbench"
;
```

```
const
 
emits
 
=
 
defineEmits
([
"clearitems"
, 
"backData"
]);
```

```
const
 
props
 
=
 
defineProps
({
```

```
  
choosePeople
: {
```

```
    
type
: 
Array
,
```

```
    
default
: () 
=>
 {
```

```
      
return
 [];
```

```
    },
```

```
  },
```

```
  
type
: {
```

```
    
type
: 
String
,
```

```
    
default
: () 
=>
 {
```

```
      
return
 
""
;
```

```
    },
```

```
  },
```

```
});
```

```
let
 
show
 
=
 
ref
(
true
);
```

```
let
 
yetPeople
 
=
 
ref
([]);
```

```
let
 
allPeople
 
=
 
ref
([]);
```

```
let
 
leftPeople
 
=
 
ref
(
""
);
```

```
//
```

_拉取数据_

```
const
 
generateData
 
=
 
async
 () 
=>
 {
```

```
  
let
 
res
 
=
 
await
 
userMailList
({});
```

```
  
let
 
peopleList
 
=
 
res
.
data
;
```

```
  
const
 
datain
 
=
 [];
```

```
  
peopleList
.
forEach
((
item
, 
index
) 
=>
 {
```

```
    
datain
.
push
({
```

```
      
label
: 
item
.
userName
,
```

```
      
key
: 
item
.
accountId
,
```

```
      
spell
: 
item
.
userName
,
```

```
      
disabled
: 
item
.
isMain
 
===
 
true
 
?
 
true
 
:
 
false
,
```

```
      
isAdmin
: 
item
.
isMain
,
```

```
    });
```

```
  });
```

```
  
allPeople
.
value
 
=
 
datain
;
```

```
  
yetPeople
.
value
 
=
 
JSON
.
parse
(
JSON
.
stringify
(
props
.
choosePeople
));
```

```
};
```

```
//
```

_确认_

```
const
 
check
 
=
 () 
=>
 {
```

```
  
emits
(
"backData"
, 
yetPeople
.
value
);
```

```
  
clearitems
();
```

```
};
```

```
//
```

_左侧选择的人员监听_

```
const
 
changeLeftPeople
 
=
 (
query
, 
item
) 
=>
 {
```

```
  
leftPeople
.
value
 
=
 
query
;
```

```
};
```

```
//
```

_退出_

```
const
 
clearitems
 
=
 () 
=>
 {
```

```
  
emits
(
"clearitems"
);
```

```
};
```

```
//
```

_自定义搜索方法_

```
const
 
filterMethod
 
=
 (
query
, 
item
) 
=>
 {
```

```
  
return
 
item
.
spell
.
indexOf
(
query
) 
>
 
-
1
;
```

```
};
```

```
// 
```

_监听_

```
//
```

_监听左侧人员选择状态_

```
watch
(
leftPeople
, (
nVal
) 
=>
 {
```

```
  
if
 (
leftPeople
.
value
.
length
 
>
 
0
 
&&
 
props
.
type
 
==
 
"limt1"
) {
```

```
    
allPeople
.
value
.
forEach
((
item
, 
index
) 
=>
 {
```

```
      
if
 (
item
.
key
 
!=
 
leftPeople
.
value
) {
```

```
        
item
.
disabled
 
=
 
true
;
```

```
      }
```

```
    });
```

```
  } 
else
 
if
 (
props
.
type
 
==
 
"limt1"
) {
```

```
    
allPeople
.
value
.
forEach
((
item
, 
index
) 
=>
 {
```

```
      
if
 (
item
.
isAdmin
 
!==
 
true
) {
```

```
        
item
.
disabled
 
=
 
false
;
```

```
      }
```

```
    });
```

```
  }
```

```
});
```

```
//
```

_监听右侧是否有已选择的人员_

```
watch
(
yetPeople
, (
nVal
) 
=>
 {
```

```
  
if
 (
yetPeople
.
value
.
length
 
==
 
0
 
&&
 
props
.
type
 
==
 
"limt1"
) {
```

```
    
allPeople
.
value
.
forEach
((
item
, 
index
) 
=>
 {
```

```
      
if
 (
item
.
isAdmin
 
!==
 
true
) {
```

```
        
item
.
disabled
 
=
 
false
;
```

```
      }
```

```
    });
```

```
  }
```

```
});
```

```
onMounted
(() 
=>
 {
```

```
  
generateData
();
```

```
});
```

```
</
script
>
```

```
<
style
 
lang
=
"scss"
 
scoped
>
```

```
.peopleCheck
 {
```

```
  height: 
500
px
;
```

```
  ::
v-deep
(
.el-transfer-panel__body
) {
```

```
    height: 
350
px
;
```

```
  }
```

```
  ::v-deep(
.el-transfer-panel__list.is-filterable
) {
```

```
    height: 
350
px
;
```

```
  }
```

```
}
```

```
</
style
>
```

父组件

```
html
```

```
￼
<
PeopleCheck
```

```
ref
=
"refPeopleCheck"
```

```
v-if
=
"
checkPeopleCheck
"
```

```
:
choosePeople
=
"
choosePeople
"
 
```

已选的人员的

```
ID
```

数组

```
type
=
"limt1"
                 
```

打开只能从左侧选择一个人的模式

```
@
backData
=
"
backData
"
         
```

回显

```
@
clearitems
=
"
clearitems
"
     
```

关闭

```
    />
```

```
//
```

_↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓__成员选择组件__↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓_

```
//
```

```
//
```

_打开成员选择_

```
const
 
peopleCheckShow
 
=
 
async
 (
row
) 
=>
 {
```

```
  
//
```

已选择的人

```
  
choosePeople
.
value
 
=
 
```

{{子组件中

```
peopleList
```

的

```
key
```

相对应 }}

```
  
checkPeopleCheck
.
value
 
=
 
true
;
```

```
};
```

```
//
```

_成员选择回显的数据_

```
const
 
backData
 
=
 (
data
) 
=>
 {};
```

```
//
```

_关闭_

```
const
 
clearitems
 
=
 (
row
) 
=>
 {
```

```
  
checkPeopleCheck
.
value
 
=
 
false
;
```

```
};
```

```
//
```

_↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑__成员选择组件__↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑_

```
//
```